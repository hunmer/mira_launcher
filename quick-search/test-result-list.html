<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ResultListç»„ä»¶æµ‹è¯•</title>
    
    <!-- PrimeVue CSS -->
    <link rel="stylesheet" href="https://unpkg.com/primevue@^4/resources/themes/aura-light-green/theme.css">
    <link rel="stylesheet" href="https://unpkg.com/primevue@^4/resources/primevue.min.css">
    <link rel="stylesheet" href="https://unpkg.com/primeicons@^7/primeicons.css">
    <link rel="stylesheet" href="https://unpkg.com/primeflex@^3/primeflex.css">
    
    <!-- ç»„ä»¶æ ·å¼ -->
    <link rel="stylesheet" href="components/ResultList.css">
    
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Inter, system-ui, Avenir, Helvetica, Arial, sans-serif;
            background: var(--surface-ground, #f8f9fa);
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        .test-controls {
            margin-bottom: 20px;
            padding: 15px;
            background: #f0f9ff;
            border: 1px solid #0ea5e9;
            border-radius: 6px;
        }
        .control-group {
            margin-bottom: 10px;
        }
        .control-group label {
            display: inline-block;
            width: 120px;
            font-weight: 500;
        }
        .control-group input, .control-group select {
            padding: 5px 10px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            margin-right: 10px;
        }
        .test-info {
            margin: 20px 0;
            padding: 15px;
            background: #f0f9ff;
            border: 1px solid #0ea5e9;
            border-radius: 6px;
        }
        .event-log {
            margin-top: 20px;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 6px;
            max-height: 200px;
            overflow-y: auto;
        }
        .log-item {
            padding: 5px 0;
            border-bottom: 1px solid #e5e5e5;
            font-size: 14px;
            font-family: monospace;
        }
    </style>
</head>

<body>
    <div id="app">
        <div class="test-container">
            <h1>ResultList ç»„ä»¶æµ‹è¯•</h1>
            
            <div class="test-controls">
                <div class="control-group">
                    <label>æœç´¢æŸ¥è¯¢:</label>
                    <input v-model="searchQuery" type="text" placeholder="è¾“å…¥æœç´¢å…³é”®è¯..." @input="updateResults">
                </div>
                <div class="control-group">
                    <label>é€‰ä¸­ç´¢å¼•:</label>
                    <input v-model.number="selectedIndex" type="number" min="-1" :max="testResults.length - 1">
                    <button @click="selectedIndex = -1">æ¸…é™¤é€‰ä¸­</button>
                </div>
                <div class="control-group">
                    <label>æ˜¾ç¤ºè¯„åˆ†:</label>
                    <input v-model="showScore" type="checkbox">
                    <label>åŠ è½½çŠ¶æ€:</label>
                    <input v-model="loading" type="checkbox">
                </div>
                <div class="control-group">
                    <label>ç©ºçŠ¶æ€ç±»å‹:</label>
                    <select v-model="emptyStateType">
                        <option value="search">æœç´¢æç¤º</option>
                        <option value="noResults">æ— ç»“æœ</option>
                    </select>
                </div>
            </div>
            
            <div class="test-info">
                <h3>æµ‹è¯•åŠŸèƒ½:</h3>
                <ul>
                    <li>âœ… ä¸åŒç±»å‹ç»“æœå±•ç¤º (åº”ç”¨ã€é¡µé¢ã€æ’ä»¶ã€æ–‡ä»¶)</li>
                    <li>âœ… é€‰ä¸­çŠ¶æ€é«˜äº®å’Œé¼ æ ‡æ‚¬åœæ•ˆæœ</li>
                    <li>âœ… æœç´¢å…³é”®è¯é«˜äº®æ˜¾ç¤º</li>
                    <li>âœ… å›¾æ ‡å±•ç¤ºå’Œé”™è¯¯å¤„ç†</li>
                    <li>âœ… å“åº”å¼è®¾è®¡å’Œæ— éšœç¢æ”¯æŒ</li>
                </ul>
            </div>
            
            <!-- ResultListç»„ä»¶æµ‹è¯• -->
            <div style="height: 500px; border: 1px solid #d1d5db; border-radius: 8px; overflow: hidden;">
                <result-list
                    :results="filteredResults"
                    :selected-index="selectedIndex"
                    :search-query="searchQuery"
                    :loading="loading"
                    :empty-state="currentEmptyState"
                    :show-score="showScore"
                    :max-visible-items="10"
                    @select="handleSelect"
                    @selected-index-change="handleSelectedIndexChange"
                    @mouse-enter="handleMouseEnter"
                    @mouse-leave="handleMouseLeave"
                />
            </div>
            
            <div class="event-log">
                <h4>äº‹ä»¶æ—¥å¿—:</h4>
                <div
                    v-for="(log, index) in eventLogs"
                    :key="index"
                    class="log-item"
                >
                    {{ log }}
                </div>
            </div>
        </div>
    </div>

    <!-- Vue 3 CDN -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- PrimeVue CDN -->
    <script src="https://unpkg.com/primevue@^4/umd/primevue.min.js"></script>
    <!-- ResultListç»„ä»¶ -->
    <script src="components/ResultList.js"></script>

    <script>
        const { createApp, ref, computed } = Vue

        const TestApp = {
            setup() {
                const eventLogs = ref([])
                const searchQuery = ref('')
                const selectedIndex = ref(-1)
                const showScore = ref(true)
                const loading = ref(false)
                const emptyStateType = ref('search')
                
                // æµ‹è¯•æ•°æ®
                const testResults = ref([
                    {
                        id: '1',
                        name: 'Visual Studio Code',
                        title: 'Visual Studio Code',
                        description: 'å¼ºå¤§çš„ä»£ç ç¼–è¾‘å™¨',
                        category: 'å¼€å‘å·¥å…·',
                        type: 'app',
                        icon: '/public/icons/vscode.svg',
                        score: 95,
                        version: '1.85.0'
                    },
                    {
                        id: '2',
                        name: 'Chrome Browser',
                        title: 'Chrome Browser',
                        description: 'Google Chrome ç½‘é¡µæµè§ˆå™¨',
                        category: 'ç½‘ç»œæµè§ˆ',
                        type: 'app',
                        icon: '/public/icons/chrome.svg',
                        score: 88,
                        version: '120.0'
                    },
                    {
                        id: '3',
                        name: 'è®¾ç½®é¡µé¢',
                        title: 'è®¾ç½®é¡µé¢',
                        description: 'åº”ç”¨ç¨‹åºè®¾ç½®å’Œé…ç½®',
                        category: 'ç³»ç»Ÿè®¾ç½®',
                        type: 'page',
                        score: 76
                    },
                    {
                        id: '4',
                        name: 'æ–‡ä»¶ç®¡ç†æ’ä»¶',
                        title: 'æ–‡ä»¶ç®¡ç†æ’ä»¶',
                        description: 'å¢å¼ºçš„æ–‡ä»¶ç®¡ç†åŠŸèƒ½',
                        category: 'ç³»ç»Ÿå·¥å…·',
                        type: 'plugin',
                        score: 82,
                        version: '2.1.0'
                    },
                    {
                        id: '5',
                        name: 'README.md',
                        title: 'README.md',
                        description: 'é¡¹ç›®è¯´æ˜æ–‡æ¡£',
                        category: 'æ–‡æ¡£',
                        type: 'file',
                        score: 67
                    },
                    {
                        id: '6',
                        name: 'Spotify',
                        title: 'Spotify',
                        description: 'éŸ³ä¹æµåª’ä½“åº”ç”¨',
                        category: 'å¨±ä¹',
                        type: 'app',
                        icon: '/public/icons/spotify.svg',
                        score: 91,
                        version: '1.2.25'
                    }
                ])

                const addLog = (message) => {
                    const timestamp = new Date().toLocaleTimeString()
                    eventLogs.value.unshift(`[${timestamp}] ${message}`)
                    // ä¿æŒæœ€å¤š20æ¡æ—¥å¿—
                    if (eventLogs.value.length > 20) {
                        eventLogs.value = eventLogs.value.slice(0, 20)
                    }
                }

                // è¿‡æ»¤ç»“æœ
                const filteredResults = computed(() => {
                    if (!searchQuery.value.trim()) {
                        return testResults.value
                    }
                    
                    return testResults.value.filter(item => 
                        item.name.toLowerCase().includes(searchQuery.value.toLowerCase()) ||
                        item.description.toLowerCase().includes(searchQuery.value.toLowerCase()) ||
                        item.category.toLowerCase().includes(searchQuery.value.toLowerCase())
                    )
                })

                // å½“å‰ç©ºçŠ¶æ€
                const currentEmptyState = computed(() => {
                    if (emptyStateType.value === 'search') {
                        return {
                            icon: 'pi pi-search',
                            iconColor: '#6b7280',
                            title: 'å¼€å§‹è¾“å…¥ä»¥æœç´¢',
                            subtitle: 'æœç´¢åº”ç”¨ç¨‹åºã€æ–‡ä»¶æˆ–åŠŸèƒ½'
                        }
                    } else {
                        return {
                            icon: 'pi pi-exclamation-circle',
                            iconColor: '#f59e0b',
                            title: 'æœªæ‰¾åˆ°åŒ¹é…çš„ç»“æœ',
                            subtitle: 'å°è¯•ä½¿ç”¨ä¸åŒçš„å…³é”®è¯'
                        }
                    }
                })

                const updateResults = () => {
                    addLog(`ğŸ” æœç´¢æ›´æ–°: "${searchQuery.value}" (${filteredResults.value.length} ä¸ªç»“æœ)`)
                }

                const handleSelect = ({ item, index }) => {
                    addLog(`âœ… é€‰æ‹©ç»“æœ: ${item.name} (ç´¢å¼•: ${index})`)
                }

                const handleSelectedIndexChange = (newIndex) => {
                    selectedIndex.value = newIndex
                    addLog(`ğŸ“ é€‰ä¸­ç´¢å¼•å˜æ›´: ${newIndex}`)
                }

                const handleMouseEnter = ({ index, item }) => {
                    addLog(`ğŸ–±ï¸ é¼ æ ‡æ‚¬åœ: ${item.name} (ç´¢å¼•: ${index})`)
                }

                const handleMouseLeave = () => {
                    addLog(`ğŸ–±ï¸ é¼ æ ‡ç¦»å¼€`)
                }

                return {
                    eventLogs,
                    searchQuery,
                    selectedIndex,
                    showScore,
                    loading,
                    emptyStateType,
                    testResults,
                    filteredResults,
                    currentEmptyState,
                    updateResults,
                    handleSelect,
                    handleSelectedIndexChange,
                    handleMouseEnter,
                    handleMouseLeave
                }
            }
        }

        const app = createApp(TestApp)
        app.component('ResultList', ResultList)
        app.mount('#app')
    </script>
</body>
</html>
